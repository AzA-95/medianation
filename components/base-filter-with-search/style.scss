.base-filter-with-search {
	position: sticky;
	top: 0;
	z-index: 2; // нужен для выпающиго списка (В десктопе)
}

.top {
	position: relative;
	z-index: 2;
	background: var(--color-fifth);

	.container {
		position: relative;
	}
}

.close-btn {
	display: none;
}

.selects {
	display: flex;
	gap: 0 80px;
}

.select {
	&__label {
		position: relative;
		cursor: pointer;
		display: flex;
		align-items: center;
		color: rgba(var(--color-second-rgb), 0.9);
		font-size: 26px;
		font-weight: 500;
		line-height: 29px;
		padding: 25px 0;
		letter-spacing: -0.02em;

		&::before {
			content: '';
			position: absolute;
			left: 50%;
			right: 50%;
			bottom: 0;
			height: 3px;
			background: var(--color-eighth);
			transition:
				left 0.2s ease-in,
				right 0.2s ease-in;
		}

		&-arrow {
			display: flex;
			align-items: center;
			justify-content: center;
			margin-top: 2px;
			margin-left: 8px;

			&::after {
				content: '';
				width: 12px;
				height: 12px;
				background: get-svg-icon('arrow-down-round', 'color-third')
					no-repeat;
				background-position: center;
				background-size: contain;
				transition: transform 0.2s ease-in;
			}
		}

		&.active {
			&::before {
				left: 0;
				right: 0;
			}
		}

		&.active & {
			&-arrow {
				&::after {
					transform: rotate(180deg);
				}
			}
		}
	}

	&__list {
		position: absolute;
		top: 100%;
		max-width: 567px;
		max-height: 0;
		overflow-y: auto;
		background: var(--color-fifth);
		transition: max-height 0.2s ease-in;

		&.active {
			max-height: 448px;
		}

		/* Works on Firefox */
		scrollbar-width: thin;
		scrollbar-color: var(--color-eighth) var(--color-seventh);

		/* Works on Chrome, Edge, and Safari */
		&::-webkit-scrollbar {
			width: 4px;
		}

		&::-webkit-scrollbar-track {
			background: var(--color-seventh);
		}

		&::-webkit-scrollbar-thumb {
			background: var(--color-eighth);
		}
	}
}

.checkbox {
	cursor: pointer;
	display: flex;
	align-items: center;
	padding: 16px 42px 16px 24px;

	&__input {
		display: none;
	}

	&__icon {
		width: 20px;
		height: 20px;
		flex-shrink: 0;
		margin-top: 2px;
		background: var(--color-fifth);
		border: 1px solid var(--color-seventh);
	}

	&__input:checked + &__icon {
		display: flex;
		align-items: center;
		justify-content: center;
		border: none;
		background: var(--color-eighth);

		&::after {
			content: '';
			width: 8px;
			height: 6px;
			background: get-svg-icon('checkbox-arrow', 'color-fifth') no-repeat;
			background-size: contain;
		}
	}

	&__text {
		font-size: 22px;
		font-weight: 500;
		line-height: 24px;
		letter-spacing: -0.02em;
		margin-left: 16px;
	}

	@include hover {
		&:hover &__text {
			color: var(--color-forty-seventh);
		}
	}
}

.radio {
	display: flex;
	align-items: center;
	cursor: pointer;
	padding: 16px 42px 16px 24px;

	&__input {
		display: none;
	}

	&__text {
		margin: 0;
		font-size: 22px;
		font-weight: 500;
		line-height: 24px;
		letter-spacing: -0.02em;
	}

	@include hover {
		&:hover &__text {
			color: var(--color-forty-seventh);
		}
	}

	&__remove-btn {
		pointer-events: none;
		opacity: 0;
		cursor: pointer;
		width: 18px;
		height: 18px;
		flex-shrink: 0;
		border-radius: 50%;
		background: var(--color-eighth) get-svg-icon('close', 'color-fifth')
			no-repeat;
		background-position: center;
		background-size: 6px;
		margin-left: 8px;
	}

	&__input:checked ~ & {
		&__text {
			color: var(--color-forty-seventh);
		}

		&__remove-btn {
			opacity: 1;
			pointer-events: all;
		}
	}
}

.open-filter-btn {
	display: none;
}

.bottom {
	background: var(--color-sixth);
}

.bottom-row {
	display: flex;
	align-items: center;
}

.selected-checkboxes {
	display: flex;
	overflow-x: auto;
	overflow-y: hidden;
	gap: 32px;
	padding: 24px 0;
	/* Works on Firefox */
	scrollbar-width: thin;
	scrollbar-color: var(--color-eighth) var(--color-seventh);

	/* Works on Chrome, Edge, and Safari */
	&::-webkit-scrollbar {
		height: 8px;
	}

	&::-webkit-scrollbar-track {
		background: var(--color-seventh);
	}

	&::-webkit-scrollbar-thumb {
		background: var(--color-eighth);
	}
}

.selected-checkbox {
	display: flex;
	align-items: center;
	flex-shrink: 0;

	&__name {
		opacity: 0.9;
		color: var(--color-twenty-fifth);
		font-size: 20px;
		font-weight: 500;
		line-height: 22px;
		letter-spacing: -0.02em;
	}

	&__remove {
		cursor: pointer;
		width: 16px;
		height: 16px;
		flex-shrink: 0;
		border-radius: 50%;
		background: var(--color-eighth) get-svg-icon('close', 'color-fifth')
			no-repeat;
		background-position: center;
		background-size: 6px;
		margin-left: 8px;
	}
}

/* стили для searchBooster */
:deep() {
	.l-ss-c-host-wrapper-is-completions {
		width: 100% !important;
		left: 0 !important;
	}

	.l-ss-c-completions-input-wrapper {
		height: 100%;
		position: static !important;
	}
}
/* Конец */

@include md-min {
	.filter-bottom {
		display: none;
	}

	.search {
		width: 0;
		position: absolute;
		top: 50%;
		right: var(--horizontal-indent);
		transform: translateY(-50%);
		transition: width 0.2s ease-in;

		&.active {
			width: calc(100% - var(--horizontal-indent) * 2);
		}

		&__input-wrap {
			opacity: 0;
			width: 100%;
			height: 50px;
			transition: all 0.2s ease-in;
		}

		&.active &__input-wrap {
			opacity: 1;
		}

		&__input {
			width: 100%;
			height: 100%;
			border-radius: 4px;
			border: 1px solid var(--color-thirty-second);
			padding: 12px 56px 12px 12px;

			&:focus {
				outline: none;
			}
		}

		&__btn {
			appearance: none;
			cursor: pointer;
			position: absolute;
			top: 50%;
			right: 0;
			width: 56px;
			height: 100%;
			padding: 0;
			border: none;
			border-radius: 0;
			transform: translateY(-50%);
			background: get-svg-icon('search', 'color-first') no-repeat;
			background-position: center;
			background-size: 50%;

			&:focus {
				outline: none;
			}
		}
	}

	.reset-btn-wrap {
		flex-shrink: 0;
		margin-left: auto;
		padding-left: 60px;
	}

	.reset-btn {
		cursor: pointer;
		appearance: none;
		color: var(--color-eighth);
		font-size: 20px;
		font-weight: 500;
		line-height: 22px;
		padding: 0;
		border: none;
		border-radius: 0;
		background: none;
		letter-spacing: -0.02em;
		border-bottom: 2px dashed var(--color-eighth);

		&:focus {
			outline: none;
		}
	}
}

@include md-max {
	.base-filter-with-search {
		&.active {
			z-index: 5; // не переносить за пределами активного класса(Будет накладываться на мобильное меню)
		}
	}

	.top {
		&-row {
			display: flex;
		}

		.container {
			padding: 0;
		}
	}

	.filter {
		pointer-events: none; // чтобы можно было кликать по мобильному меню и не ломать анимацию открытия фильтра
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 0;
		overflow: hidden;
		padding-top: var(--header-height);
		transition: height 0.5s ease-in;

		&.fixed {
			padding-top: 76px;
		}

		&.active {
			pointer-events: all;
			height: 100%;
		}

		&.visible {
			z-index: 1; // Нужен чтобы иконка поиска не была видна у открытого меню
		}

		&-content {
			height: 100%;
			overflow-y: auto;
			background: var(--color-fifth);
		}

		&-bottom {
			padding: 24px 50px;
		}
	}

	.close-btn {
		cursor: pointer;
		position: absolute;
		top: 0;
		left: 72%;
		width: 0;
		opacity: 0;
		z-index: 2;
		height: var(--header-height);
		display: flex;
		align-items: center;
		justify-content: center;
		background: var(--color-first);
		transition-property: left, width, opacity;
		transition-timing-function: ease;
		transition-duration: 1s;

		&::after {
			content: '';
			width: 24px;
			height: 24px;
			background: get-svg-icon('close-thin', 'color-fifth') no-repeat;
			background-size: contain;
		}

		.filter.fixed & {
			height: 76px;
		}
	}

	.filter.active .close-btn {
		left: 0;
		opacity: 1;
		width: 100%;
	}

	.selected-list-inside-filter {
		display: flex;
		flex-wrap: wrap;
		gap: 24px 32px;
		margin-bottom: 24px;
	}

	.search {
		display: flex;
		height: 76px;
		flex-grow: 1;

		&__input-wrap {
			width: 100%;
			height: 100%;

			&::before {
				content: '';
				pointer-events: none;
				position: absolute;
				top: 50%;
				left: 50px;
				width: 32px;
				height: 32px;
				transform: translateY(-50%);
				background: get-svg-icon('search', 'color-first') no-repeat;
				background-position: center;
				background-size: 90%;
			}
		}

		&__input {
			width: 100%;
			height: 100%;
			border: none;
			font-size: 22px;
			font-weight: 500;
			line-height: 1;
			border-radius: 0;
			background: var(--color-fifth);
			padding-left: 106px;
			padding-right: 20px;

			&::placeholder {
				color: rgba(var(--color-twenty-fifth), 0.3);
			}

			&:focus {
				outline: none;
			}
		}

		&__btn {
			display: none;
		}
	}

	.open-filter-btn {
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 22px;
		font-weight: 500;
		line-height: 24px;
		padding: 26px 35px;
		margin-left: auto;
		background: var(--color-twentieth);

		&::before {
			content: '';
			width: 24px;
			height: 24px;
			margin-right: 24px;
			background: get-svg-icon('filter', 'color-first') no-repeat;
			background-size: contain;
		}
	}

	.selects {
		flex-direction: column;
	}

	.select {
		width: 100%;

		&__label {
			font-size: 19px;
			line-height: 24px;
			padding: 16px 88px 16px 40px;
			overflow: hidden; // скрываем иначе появляется скролбар снизу в десктопе(Из-за поворачивания arrow иконки)
			transition: all 0.5s ease;

			&::before {
				content: none;
			}

			&-arrow {
				position: absolute;
				top: 0;
				right: 0;
				width: 72px;
				height: 100%;
				margin-top: 0;
				margin-left: 0;
				background-color: var(--color-fourteenth);

				&::after {
					width: 100%;
					height: 100%;
					background-size: 12px;
					transition: all 0.5s ease;
				}
			}

			&.active {
				color: var(--color-fifth);
				background: var(--color-eighth);
			}

			&.active &-arrow {
				background-color: inherit;
				border-left: 1px solid var(--color-twenty-eighth);

				&::after {
					background-image: get-svg-icon(
						'arrow-down-round',
						'color-fifth'
					);
				}
			}
		}

		&__list {
			position: static;
			color: var(--color-fifth);
			max-width: none;
			overflow: hidden;
			background: var(--color-twenty-first);

			&.active {
				max-height: var(--max-height, none);
			}
		}
	}

	.checkbox,
	.radio {
		&__text {
			font-size: 20px;
		}
	}

	.checkbox {
		&__icon {
			margin-top: -2px;
		}
	}

	.selected-checkboxes {
		padding-left: var(--horizontal-indent);
		padding-right: var(--horizontal-indent);
		margin: 0 calc(var(--horizontal-indent) * -1);
		/* Hide scrollbar for IE, Edge and Firefox */
		-ms-overflow-style: none; /* IE and Edge */
		scrollbar-width: none; /* Firefox */

		/* Hide scrollbar for Chrome, Safari and Opera */
		&::-webkit-scrollbar {
			display: none;
		}
	}

	.reset-btn-wrap {
		width: 100%;

		&_hide-md-max {
			display: none;
		}
	}

	.reset-btn {
		appearance: none;
		cursor: pointer;
		color: var(--color-fifth);
		width: 100%;
		font-size: 15px;
		line-height: 1;
		padding: 16px;
		border: none;
		border-radius: 0;
		text-transform: uppercase;
		background: var(--color-eighth);

		&:focus {
			outline: none;
		}
	}
}

@include sm {
	.filter {
		&.fixed {
			padding-top: 56px;
		}

		&-bottom {
			padding: 16px 25px;
		}
	}

	.close-btn {
		.filter.fixed & {
			height: 56px;
		}
	}

	.selected-list-inside-filter {
		gap: 16px;
		margin-bottom: 16px;
	}

	.search {
		height: 56px;

		&__input-wrap {
			&::before {
				left: 25px;
				width: 24px;
				height: 24px;
			}
		}

		&__input {
			font-size: 16px;
			padding-left: 65px;
		}
	}

	.open-filter-btn {
		font-size: 0;
		padding: 0;
		width: 72px;
		height: 56px;

		&::before {
			margin-right: 0;
		}
	}

	.select {
		&__label {
			padding: 16px 88px 16px 24px;
		}
	}

	.checkbox,
	.radio {
		&__text {
			font-size: 14px;
			line-height: 15px;
		}
	}

	.selected-checkboxes {
		gap: 16px;
	}

	.selected-checkbox {
		&__name {
			font-size: 16px;
			line-height: 17px;
		}

		&__remove {
			margin-left: 4px;
		}
	}
}
